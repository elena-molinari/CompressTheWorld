<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <link rel="icon" href="data:;base64,=" />

    <!-- Aggiungi wavesurfer -->
    <script src="https://unpkg.com/wavesurfer.js"></script>

    <!-- Aggiungi jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-Knob/1.2.13/jquery.knob.min.js" integrity="sha256-2144q+NOM/XU6ZxSqRTJ8P0W/CkY6zXc6mXYt4+mF9s=" crossorigin="anonymous"></script>

    <!--File CSS-->
    <link rel="stylesheet" href="style.css">
    <!--File JS-->
    <script src="script.js" defer></script>

</head>
<body> 
    <div id="top-half">
        <!-- Dropdown 1 -->
        <div class="dropdown">
            <button class="dropdown-btn" onclick="toggleDropdown('dropdownContent1')">+</button>
            <div class="dropdown-content" id="dropdownContent1">
                <p onclick="selectTrack('wv1','audioPlayer1')">Select track</p>
                <p onclick="uploadTrack('audioFileInput1', 'audioPlayer1', 'wv1')">Upload track</p>
            </div>
            <div class="waveform-container" id="wv1"></div> 
            <button id="selectBtn_wv1" class="select-btn" onclick="toggleTrackSelection('wv1')"></button>
        </div>   
        <!-- Hidden file input, triggered programmatically -->
        <input type="file" id="audioFileInput1" accept="audio/*" style="display: none;">
        <audio id="audioPlayer1" controls style="display: none;"></audio>
        
        <!-- Dropdown 2 -->
        <div class="dropdown">
            <button class="dropdown-btn" onclick="toggleDropdown('dropdownContent2')">+</button>
            <div class="dropdown-content" id="dropdownContent2">
                <p onclick="selectTrack('wv2','audioPlayer2')">Select track</p>
                <p onclick="uploadTrack('audioFileInput2', 'audioPlayer2', 'wv2')">Upload track</p>
            </div>
            <div class="waveform-container" id="wv2"></div> 
            <button id="selectBtn_wv2" class="select-btn" onclick="toggleTrackSelection('wv2')"></button>
        </div>
        <!-- Hidden file input, triggered programmatically -->
        <input type="file" id="audioFileInput2" accept="audio/*" style="display: none;">
        <audio id="audioPlayer2" controls style="display: none;"></audio>  

        <!-- Dropdown 3 -->
        <div class="dropdown">
            <button class="dropdown-btn" onclick="toggleDropdown('dropdownContent3')">+</button>
            <div class="dropdown-content" id="dropdownContent3">
                <p onclick="selectTrack('wv3', 'audioPlayer3')">Select track</p>
                <p onclick="uploadTrack('audioFileInput3', 'audioPlayer3', 'wv3')">Upload track</p>
            </div>
            <div class="waveform-container" id="wv3"></div>
            <button id="selectBtn_wv3" class="select-btn" onclick="toggleTrackSelection('wv3')"></button>
        </div>    
        <!-- Hidden file input, triggered programmatically -->
        <input type="file" id="audioFileInput3" accept="audio/*" style="display: none;">
        <audio id="audioPlayer3" controls style="display: none;"></audio>

        <!-- Dropdown 4 -->
        <div class="dropdown">
            <button class="dropdown-btn" onclick="toggleDropdown('dropdownContent4')">+</button>
            <div class="dropdown-content" id="dropdownContent4">
                <p onclick="selectTrack('wv4', 'audioPlayer4')">Select track</p>
                <p onclick="uploadTrack('audioFileInput4', 'audioPlayer4', 'wv4')">Upload track</p>
            </div>
            <div class="waveform-container" id="wv4"></div>
            <button id="selectBtn_wv4" class="select-btn" onclick="toggleTrackSelection('wv4')"></button>
        </div>    
        <!-- Hidden file input, triggered programmatically -->
        <input type="file" id="audioFileInput4" accept="audio/*" style="display: none;">
        <audio id="audioPlayer4" controls style="display: none;"></audio>
    </div>


    <!--Second part of the page-->        
    <div class="bottom-half">

        <!-- Input Knobs -->
        <div id="param_comp">
            <div class="knob-rowt">
                <div class="knob-container">
                    <input id="th_knob" value="-50">
                        <div class="knob-label">Threshold</div>
                        <div class="knob-value" id="th_value"></div>
                    </input>
                </div>
                <div class="knob-container">
                    <input id="ratio_knob" value="12">
                        <div class="knob-label">Ratio</div>
                        <div class="knob-value" id="ratio_value"></div>
                    </input>
                </div>
                <div class="knob-container">
                    <input id="knee_knob" value="40">
                        <div class="knob-label">Knee</div>
                        <div class="knob-value" id="knee_value"></div>
                    </input>
                </div>
            </div>
            <div class="knob-rowb">
                <div class="knob-container">
                    <input id="att_knob" value="0.003">
                        <div class="knob-label">Attack</div>
                        <div class="knob-value" id="att_value"></div>
                    </input>
                </div>
                <div class="knob-container">
                    <input id="rel_knob" value="0.25">
                        <div class="knob-label">Release</div>
                        <div class="knob-value" id="rel_value"></div>
                    </input>
                </div>
            </div>
        </div>

        <!--VUmeter-->   
        <div id='meters'>
            <div id='VUmeter' class='meter'>
               <span class='indicator minus'>-</span>
               <span class='indicator plus'>+</span>
               <div class='needle'></div>
               <div class='label'>VU</div>
                <div class='meterLine'>
                    <span class='base'></span>
                    <div class='danger'>
                        <span class='base'></span>
                    </div>    
                </div>
               <div class='shadow'></div>
               <div class='needleBase'><span></span></div>
            </div> 
        </div>

        <!--Tasti gestione traccia e ompressione--> 
        <div id="activate_comp">
            <div class="button-rowt">
                <button class="backward-button" onclick="backTracks()"></button>
                <button class="play-button"  onclick="playTracks()"></button>
                <button class="pause-button" onclick="pauseTracks()"></button>
            </div>
            <div class="button-rowb">
                <button id="toggle_comp" onclick="toggle_comp()">Compression Off</button>
                <button id="makeupGain" onclick="updateMakeUpGain()">Make-Up</button>
            </div>
            <div class="button-rowl">
                <button id="downloadButton" onclick="mergeAndDownloadTracks()">Download</button>
            </div>
        </div>
    </div>
</body>
